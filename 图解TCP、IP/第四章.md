# IP协议
> 数据链路负责一个区间内的通信传说，IP负责将数据包发送给最重的目标地址。还是一堆概念性的东西，记得住记，记不住拉倒……用到再说吧。
## IP基础知识
在TCP/IP通信中所有主机或者路由器必须设定自己的IP地址。

### 路由控制
路由控制是指将分组数据发送到最终目标地址的功能。
![](https://github.com/luanguang/articles/blob/master/images/IP%E6%95%B0%E6%8D%AE%E5%8C%85.png)
IP数据包类似快递中的包裹，送货车类似数据链路，包裹依赖送货车承载转运，而一辆送货车只能将包裹送到某个区间内，由新的快递点安排新的送货车来进行下一区间的运输。

### 数据链路层抽象化
IP是实现多个数据链路之间通信的协议。对不同数据链路的相异特性进行抽象化也是IP的重要作用之一。不同数据链路最大的区别在于它们各自的最大传输单位（MTU）不同，类似快递包裹有各自的大小限制。当数据包过大时，IP进行分片处理，即将大的IP包分成多个较小的IP包，当到目标地址后再被组合起来传给上一层。

### IP属于面向无连接型
在发包前不需要建立与对端目标地址之间的连接。1.为了简化；2.为了提速。

TCP则是面向连接的协议，负责保证对端主机确实收到数据。

## IP地址
IP地址（IPv4地址）由32位正整数来表示。IP地址在计算机内部以二进制方式被处理，但习惯将32位的IP地址以8位为一组，分成4组，每组以“.”隔开，转换成10进制来表示。IPv4地址为32位，最多允许43亿台计算机连接网络。

实际上，IP地址并非根据主机台数来分配而是每一台主机上的每一块网卡都得设置IP地址，一块网卡可以设置一个或以上个IP,路由器通常会配置两个以上的网卡。
![](https://github.com/luanguang/articles/blob/master/images/IP%E5%9C%B0%E5%9D%80%E5%8C%BA%E5%88%86.png)
IP地址由“网络地址”和“主机地址”两个部分组成。

IP有A、B、C、D四种类型。
![](https://github.com/luanguang/articles/blob/master/images/IP%E5%88%86%E7%B1%BB.png)
不过按照这样分配会造成浪费，所以引入了子网掩码这么一个东西。
子网掩码用二进制方式表示的话，也是一个32位数字。它对应IP地址网络标识部分的位全部为“1”，对应IP地址主机标识的部分则全部为“0”
![](https://github.com/luanguang/articles/blob/master/images/%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81.png)
### IPv4
![](https://github.com/luanguang/articles/blob/master/images/IPv4.png)
![](https://github.com/luanguang/articles/blob/master/images/IPv4%E8%A1%A8.png)

### IPv6
IPv6是为了根本解决IPv4地址耗尽的问题而被标准化的网际协议（IP协议）。IPv6的地址长度是8个16位字节。IPv4的4倍。
![](https://github.com/luanguang/articles/blob/master/images/IPv6.png)
![](https://github.com/luanguang/articles/blob/master/images/IPv6%E8%A1%A8.png)
